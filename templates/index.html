<!DOCTYPE html>
<html>
<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="">

  <title>Google Maps Scraper</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.css') }}" />

  <!-- Fonts style -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

  <!-- Owl Slider Stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <!-- Font Awesome Style -->
  <link href="{{ url_for('static', filename='css/font-awesome.min.css') }}" rel="stylesheet" />

  <!-- Custom Styles for this template -->
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" />

  <!-- Responsive Style -->
  <link href="{{ url_for('static', filename='css/responsive.css') }}" rel="stylesheet" />
</head>
<body>

  <div class="hero_area">

    <div class="hero_bg_box">
      <div class="bg_img_box">
        <img src="{{ url_for('static', filename='images/hero-bg.png') }}" alt="">
      </div>
    </div>

    <!-- header section strats -->
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container ">
          <a class="navbar-brand" href="{{ url_for('index') }}">
            <span>
              Map Scraper
            </span>
          </a>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class=""> </span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav  ">
              <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('index') }}">Home <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('about') }}"> About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('service') }}">Services</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('why') }}">Why Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('team') }}">Team</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#"> <i class="fa fa-user" aria-hidden="true"></i> Login</a>
              </li>
              <form class="form-inline">
                <button class="btn my-2 my-sm-0 nav_search-btn" type="submit">
                  <i class="fa fa-search" aria-hidden="true"></i>
                </button>
              </form>
            </ul>
          </div>
        </nav>
      </div>
    </header>
    <!-- end header section -->
    <!-- slider section -->
    <section class="slider_section ">
      <div id="customCarousel1" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="container ">
              <div class="row">
                <div class="col-md-6 ">
                  <div class="detail-box">
                    <h1>
                      Google Maps <br>
                      Scraper
                    </h1>
                    <p>
                      Extract valuable data from Google Maps with our powerful scraping tool. Find businesses, contact information, reviews, and more with just a few clicks.
                    </p>
                    <div class="btn-box">
                      <a href="#scraper-section" class="btn1">
                        Get Started
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="{{ url_for('static', filename='images/slider-img.png') }}" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item ">
            <div class="container ">
              <div class="row">
                <div class="col-md-6 ">
                  <div class="detail-box">
                    <h1>
                      Powerful <br>
                      Data Extraction
                    </h1>
                    <p>
                      Our Google Maps scraper helps businesses and researchers collect location data efficiently. Perfect for market research, lead generation, and competitive analysis.
                    </p>
                    <div class="btn-box">
                      <a href="#scraper-section" class="btn1">
                        Try Now
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="{{ url_for('static', filename='images/slider-img.png') }}" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="container ">
              <div class="row">
                <div class="col-md-6 ">
                  <div class="detail-box">
                    <h1>
                      Location <br>
                      Intelligence
                    </h1>
                    <p>
                      Get insights about any location on Google Maps. Our scraper extracts detailed information to help you make informed business decisions.
                    </p>
                    <div class="btn-box">
                      <a href="#scraper-section" class="btn1">
                        Learn More
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="{{ url_for('static', filename='images/slider-img.png') }}" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <ol class="carousel-indicators">
          <li data-target="#customCarousel1" data-slide-to="0" class="active"></li>
          <li data-target="#customCarousel1" data-slide-to="1"></li>
          <li data-target="#customCarousel1" data-slide-to="2"></li>
        </ol>
      </div>

    </section>
    <!-- end slider section -->
  </div>

  <!-- Google Maps Scraper Section -->
  <section class="scraper_section layout_padding" id="scraper-section">
    <div class="container">
      <div class="heading_container heading_center">
        <h2>
          Google Maps <span>Scraper</span>
        </h2>
        <p>
          Extract valuable data from Google Maps locations quickly and efficiently
        </p>
      </div>
      
      <div class="row">
        <div class="col-md-10 mx-auto">
          <div class="card">
            <div class="card-body">
              <ul class="nav nav-tabs" id="scraperTabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <a class="nav-link active" id="config-tab" data-toggle="tab" href="#config" role="tab" aria-controls="config" aria-selected="true">Configuration</a>
                </li>
                <li class="nav-item" role="presentation">
                  <a class="nav-link" id="results-tab" data-toggle="tab" href="#results" role="tab" aria-controls="results" aria-selected="false">Results</a>
                </li>
                <li class="nav-item" role="presentation">
                  <a class="nav-link" id="log-tab" data-toggle="tab" href="#log" role="tab" aria-controls="log" aria-selected="false">Log</a>
                </li>
              </ul>
              
              <div class="tab-content" id="scraperTabsContent">
                <!-- Configuration Tab -->
                <div class="tab-pane fade show active p-3" id="config" role="tabpanel" aria-labelledby="config-tab">
                  <form id="scraper-form">
                    <div class="form-group">
                      <label for="search_query">Search Queries (one per line):</label>
                      <textarea class="form-control" id="search_query" name="search_query" rows="4" placeholder="e.g., Restaurants in New York&#10;Coffee shops in Chicago&#10;Hotels in Los Angeles" required></textarea>
                    </div>
                    
                    <div class="row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="num_results">Results per Query:</label>
                          <input type="number" class="form-control" id="num_results" name="num_results" min="1" max="50" value="5">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="num_threads">Number of Threads:</label>
                          <input type="number" class="form-control" id="num_threads" name="num_threads" min="1" max="8" value="1">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="output_format">Output Format:</label>
                          <select class="form-control" id="output_format" name="output_format">
                            <option value="csv">CSV</option>
                            <option value="json">JSON</option>
                            <option value="excel">Excel</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="headless" name="headless" value="true" checked>
                            <label class="form-check-label" for="headless">Headless Mode (run browser in background)</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div class="form-group">
                      <label>Data to Extract:</label>
                      <div class="row">
                        <div class="col-md-4">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="extract_name" id="extract_name" value="1" checked>
                            <label class="form-check-label" for="extract_name">Business Name</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="extract_address" id="extract_address" value="1" checked>
                            <label class="form-check-label" for="extract_address">Address</label>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="extract_phone" id="extract_phone" value="1" checked>
                            <label class="form-check-label" for="extract_phone">Phone Number</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="extract_website" id="extract_website" value="1" checked>
                            <label class="form-check-label" for="extract_website">Website</label>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="extract_rating" id="extract_rating" value="1" checked>
                            <label class="form-check-label" for="extract_rating">Rating</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="extract_reviews" id="extract_reviews" value="1" checked>
                            <label class="form-check-label" for="extract_reviews">Reviews</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg btn-block">Start Scraping</button>
                  </form>
                </div>
                
                <!-- Results Tab -->
                <div class="tab-pane fade p-3" id="results" role="tabpanel" aria-labelledby="results-tab">
                  <div id="status-container" class="mb-4">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="card">
                          <div class="card-body">
                            <h5 class="card-title">Status</h5>
                            <h3 id="status-badge" class="badge badge-secondary">Not Started</h3>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="card">
                          <div class="card-body">
                            <h5 class="card-title">Elapsed Time</h5>
                            <h3 id="elapsed-time">00:00:00</h3>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="progress mb-4">
                    <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                  </div>
                  
                  <div id="results-details" class="mb-4">
                    <div class="alert alert-secondary" role="alert">
                      No scraping job has been started yet. Configure your settings and click "Start Scraping".
                    </div>
                  </div>
                  
                  <div id="download-container" style="display:none;">
                    <div class="card">
                      <div class="card-body text-center">
                        <h5 class="card-title">Download Results</h5>
                        <p class="card-text">Your scraping job has completed successfully. You can download the results file below.</p>
                        <a id="download-btn" href="#" class="btn btn-success">Download Results</a>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Log Tab -->
                <div class="tab-pane fade p-3" id="log" role="tabpanel" aria-labelledby="log-tab">
                  <div class="card">
                    <div class="card-body">
                      <h5 class="card-title">Scraping Log</h5>
                      <div class="log-container p-3 bg-light" style="height: 300px; overflow-y: auto; font-family: monospace;">
                        <div id="log-content"></div>
                      </div>
                      <div class="mt-3">
                        <button id="clear-log-btn" class="btn btn-secondary btn-sm">Clear Log</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End Google Maps Scraper Section -->

  <!-- service section -->
  <section class="service_section layout_padding">
    <div class="service_container">
      <div class="container ">
        <div class="heading_container heading_center">
          <h2>
            Our <span>Services</span>
          </h2>
          <p>
            Powerful data extraction tools to help your business grow
          </p>
        </div>
        <div class="row">
          <div class="col-md-4 ">
            <div class="box ">
              <div class="img-box">
                <img src="{{ url_for('static', filename='images/s1.png') }}" alt="">
              </div>
              <div class="detail-box">
                <h5>
                  Business Data Collection
                </h5>
                <p>
                  Extract business information including names, addresses, phone numbers, websites, and more from Google Maps.
                </p>
                <a href="">
                  Read More
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-4 ">
            <div class="box ">
              <div class="img-box">
                <img src="{{ url_for('static', filename='images/s2.png') }}" alt="">
              </div>
              <div class="detail-box">
                <h5>
                  Review Analysis
                </h5>
                <p>
                  Collect and analyze customer reviews to gain insights into business reputation and customer satisfaction.
                </p>
                <a href="">
                  Read More
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-4 ">
            <div class="box ">
              <div class="img-box">
                <img src="{{ url_for('static', filename='images/s3.png') }}" alt="">
              </div>
              <div class="detail-box">
                <h5>
                  Market Research
                </h5>
                <p>
                  Gather data about businesses in specific locations to perform competitive analysis and market research.
                </p>
                <a href="">
                  Read More
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="btn-box">
          <a href="{{ url_for('service') }}">
            View All Services
          </a>
        </div>
      </div>
    </div>
  </section>
  <!-- end service section -->

  <!-- about section -->
  <section class="about_section layout_padding">
    <div class="container  ">
      <div class="heading_container heading_center">
        <h2>
          About <span>Us</span>
        </h2>
        <p>
          Learn more about our Google Maps scraping tool and how it can help your business
        </p>
      </div>
      <div class="row">
        <div class="col-md-6 ">
          <div class="img-box">
            <img src="{{ url_for('static', filename='images/about-img.png') }}" alt="">
          </div>
        </div>
        <div class="col-md-6">
          <div class="detail-box">
            <h3>
              Data-Driven Success
            </h3>
            <p>
              Our Google Maps scraper is designed to help businesses collect valuable location data efficiently. Whether you're conducting market research, generating leads, or analyzing competitors, our tool provides the data you need.
            </p>
            <p>
              With customizable search parameters and multiple export options, you can tailor the scraping process to meet your specific needs and integrate the results seamlessly into your workflow.
            </p>
            <a href="{{ url_for('about') }}">
              Learn More
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- end about section -->

  <!-- why section -->
  <section class="why_section layout_padding">
    <div class="container">
      <div class="heading_container heading_center">
        <h2>
          Why Choose <span>Us</span>
        </h2>
      </div>
      <div class="why_container">
        <div class="box">
          <div class="img-box">
            <img src="{{ url_for('static', filename='images/w1.png') }}" alt="">
          </div>
          <div class="detail-box">
            <h5>
              Fast & Efficient
            </h5>
            <p>
              Our scraper is optimized for speed and efficiency, allowing you to extract large amounts of data in a fraction of the time it would take manually.
            </p>
          </div>
        </div>
        <div class="box">
          <div class="img-box">
            <img src="{{ url_for('static', filename='images/w2.png') }}" alt="">
          </div>
          <div class="detail-box">
            <h5>
              Accurate Results
            </h5>
            <p>
              Get precise and up-to-date information directly from Google Maps, ensuring that your data is accurate and reliable for decision-making.
            </p>
          </div>
        </div>
        <div class="box">
          <div class="img-box">
            <img src="{{ url_for('static', filename='images/w3.png') }}" alt="">
          </div>
          <div class="detail-box">
            <h5>
              Customizable Options
            </h5>
            <p>
              Tailor your scraping parameters to extract exactly the data you need, with options for different export formats to fit your workflow.
            </p>
          </div>
        </div>
        <div class="box">
          <div class="img-box">
            <img src="{{ url_for('static', filename='images/w4.png') }}" alt="">
          </div>
          <div class="detail-box">
            <h5>
              User-Friendly Interface
            </h5>
            <p>
              Our intuitive interface makes it easy to set up and run scraping tasks, even for users with no technical background or coding experience.
            </p>
          </div>
        </div>
      </div>
      <div class="btn-box">
        <a href="{{ url_for('why') }}">
          Read More
        </a>
      </div>
    </div>
  </section>
  <!-- end why section -->

  <!-- info section -->
  <section class="info_section layout_padding2">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-3 info_col">
          <div class="info_contact">
            <h4>
              Contact
            </h4>
            <div class="contact_link_box">
              <a href="">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span>
                  16 Adrash Basti Tonk Phatak
                </span>
              </a>
              <a href="">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>
                  Call +91 6378468453
                </span>
              </a>
              <a href="">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>
                  akshatsanghi22@gmail.com
                </span>
              </a>
            </div>
          </div>
          <div class="info_social">
            <a href="">
              <i class="fa fa-facebook" aria-hidden="true"></i>
            </a>
            <a href="">
              <i class="fa fa-twitter" aria-hidden="true"></i>
            </a>
            <a href="">
              <i class="fa fa-linkedin" aria-hidden="true"></i>
            </a>
            <a href="">
              <i class="fa fa-instagram" aria-hidden="true"></i>
            </a>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 info_col">
          <div class="info_detail">
            <h4>
              Info
            </h4>
            <p>
              Our Google Maps scraper provides businesses with valuable location data for market research, lead generation, and competitive analysis.
            </p>
          </div>
        </div>
        <div class="col-md-6 col-lg-2 mx-auto info_col">
          <div class="info_link_box">
            <h4>
              Links
            </h4>
            <div class="info_links">
              <a class="active" href="{{ url_for('index') }}">
                Home
              </a>
              <a class="" href="{{ url_for('about') }}">
                About
              </a>
              <a class="" href="{{ url_for('service') }}">
                Services
              </a>
              <a class="" href="{{ url_for('why') }}">
                Why Us
              </a>
              <a class="" href="{{ url_for('team') }}">
                Team
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 info_col ">
          <h4>
            Subscribe
          </h4>
          <form action="#">
            <input type="text" placeholder="Enter email" />
            <button type="submit">
              Subscribe
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>
  <!-- end info section -->

  <!-- footer section -->
  <section class="footer_section">
    <div class="container">
      <p>
        &copy; <span id="displayYear"></span> All Rights Reserved By
        <a href="#">Google Maps Scraper</a>
      </p>
    </div>
  </section>
  <!-- footer section -->

  <!-- jQery -->
  <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.4.1.min.js') }}"></script>
  <!-- popper js -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <!-- bootstrap js -->
  <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
  <!-- owl slider -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
  </script>
  <!-- custom js -->
  <script type="text/javascript" src="{{ url_for('static', filename='js/custom.js') }}"></script>
  
  <!-- Scraper JS -->
  <script>
    $(document).ready(function() {
      // Current job tracking
      var currentJobId = null;
      var statusCheckInterval = null;
      
      // Set current year in footer
      $('#displayYear').text(new Date().getFullYear());
      
      // Add log message
      function addLogMessage(message) {
        var timestamp = new Date().toLocaleTimeString();
        $('#log-content').append(`<div><span class="text-muted">[${timestamp}]</span> ${message}</div>`);
        // Auto-scroll to bottom
        $('.log-container').scrollTop($('.log-container')[0].scrollHeight);
      }
      
      // Clear log
      $('#clear-log-btn').click(function() {
        $('#log-content').empty();
        addLogMessage("Log cleared.");
      });
      
      // Submit form
      $('#scraper-form').submit(function(e) {
        e.preventDefault();
        
        // Switch to results tab
        $('#scraperTabs a[href="#results"]').tab('show');
        
        // Reset UI
        $('#status-badge').removeClass().addClass('badge badge-info').text('Starting...');
        $('#progress-bar').css('width', '0%').attr('aria-valuenow', 0).text('0%');
        $('#results-details').html('<div class="alert alert-info">Initializing scraper...</div>');
        $('#download-container').hide();
        $('#elapsed-time').text('00:00:00');
        
        // Add log message
        addLogMessage("Starting new scraping job...");
        
        // Get form data
        var formData = $(this).serialize();
        
        // Submit job
        $.post('{{ url_for("run_scraper") }}', formData, function(response) {
          if (response.status === 'success') {
            currentJobId = response.job_id;
            addLogMessage(`Scraping job started with ID: ${currentJobId}`);
            
            // Update results details
            $('#results-details').html(`
              <div class="alert alert-info">
                <strong>Job ID:</strong> ${currentJobId}<br>
                <strong>Query:</strong> ${$('#search_query').val().split('\n')[0]} ${$('#search_query').val().split('\n').length > 1 ? '(and others)' : ''}<br>
                <strong>Results Per Query:</strong> ${$('#num_results').val()}<br>
                <strong>Output Format:</strong> ${$('#output_format').val().toUpperCase()}
              </div>
            `);
            
            // Start status check interval
            startStatusCheck();
          } else {
            // Handle error
            $('#status-badge').removeClass().addClass('badge badge-danger').text('Error');
            $('#results-details').html(`<div class="alert alert-danger">Error starting job: ${response.message}</div>`);
            addLogMessage(`Error: ${response.message}`);
          }
        })
        .fail(function(xhr, status, error) {
          // Handle AJAX error
          $('#status-badge').removeClass().addClass('badge badge-danger').text('Error');
          $('#results-details').html(`<div class="alert alert-danger">Server error: ${error}</div>`);
          addLogMessage(`Server error: ${error}`);
        });
      });
      
      // Start status check interval
      function startStatusCheck() {
        if (statusCheckInterval) {
          clearInterval(statusCheckInterval);
        }
        
        statusCheckInterval = setInterval(checkJobStatus, 2000); // Check every 2 seconds
        checkJobStatus(); // Check immediately
      }
      
      // Check job status
      function checkJobStatus() {
        if (!currentJobId) return;
        
        $.get(`{{ url_for("check_status", job_id="") }}${currentJobId}`, function(response) {
          // Update status badge
          updateStatusBadge(response.status);
          
          // Update elapsed time
          $('#elapsed-time').text(response.elapsed_time);
          
          // Update progress bar
          $('#progress-bar').css('width', `${response.progress}%`).attr('aria-valuenow', response.progress).text(`${response.progress}%`);
          
          // Add log message for status changes
          addLogMessage(`Job status: ${response.status} (Progress: ${response.progress}%)`);
          
          // Handle completed status
          if (response.status === 'completed') {
            clearInterval(statusCheckInterval);
            
            $('#results-details').html(`
              <div class="alert alert-success">
                <strong>Job completed successfully!</strong><br>
                <strong>Start Time:</strong> ${response.start_time}<br>
                <strong>End Time:</strong> ${response.end_time}<br>
                <strong>Total Duration:</strong> ${response.elapsed_time}
              </div>
            `);
            
            // Show download button
            $('#download-container').show();
            $('#download-btn').attr('href', response.download_url);
            
            addLogMessage(`Job completed. Results file: ${response.result_file}`);
          }
          
          // Handle failed status
          if (response.status === 'failed') {
            clearInterval(statusCheckInterval);
            
            $('#results-details').html(`
              <div class="alert alert-danger">
                <strong>Job failed!</strong><br>
                <strong>Error:</strong> ${response.error}<br>
                <strong>Start Time:</strong> ${response.start_time}<br>
                <strong>End Time:</strong> ${response.end_time}<br>
                <strong>Total Duration:</strong> ${response.elapsed_time}
              </div>
            `);
            
            addLogMessage(`Job failed. Error: ${response.error}`);
          }
        })
        .fail(function(xhr, status, error) {
          addLogMessage(`Error checking job status: ${error}`);
        });
      }
      
      // Update status badge
      function updateStatusBadge(status) {
        $('#status-badge').removeClass();
        
        switch(status) {
          case 'initializing':
            $('#status-badge').addClass('badge badge-secondary').text('Initializing');
            break;
          case 'running':
            $('#status-badge').addClass('badge badge-primary').text('Running');
            break;
          case 'completed':
            $('#status-badge').addClass('badge badge-success').text('Completed');
            break;
          case 'failed':
            $('#status-badge').addClass('badge badge-danger').text('Failed');
            break;
          case 'cancelled':
            $('#status-badge').addClass('badge badge-warning').text('Cancelled');
            break;
          default:
            $('#status-badge').addClass('badge badge-info').text(status);
        }
      }
      
      // Add initial log message
      addLogMessage("Google Maps Scraper initialized and ready to use.");
    });
  </script>

</body>
</html>
